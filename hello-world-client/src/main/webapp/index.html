<html>
<head>
	<title>Hello World Client</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
<script>
	var requestIdCounter = 0;
	var lastRecievedId = -1;

	function sayHello() {
		var toWho = document.getElementById('sayHelloTo').value;
		var submiturl="greeting?name="+encodeURIComponent(toWho)+"&id="+requestIdCounter++;
		$.ajax({
	        url: submiturl
	    }).then(function(data) {
			if(data.id > lastRecievedId) {
				lastRecievedId = data.id;
				document.getElementById("result").innerHTML=data.content;
			}
	    });
	}
</script>


<h1>Hello World Client</h1>
Say Hello To:
<input type="text" name="sayHelloTo" id="sayHelloTo" onkeyup="sayHello()">
<h2>Result</h2>
<div id="result">(result)</div>
</body>
</html>
